{
  "declare_macro": "osm_resource_nyc",
  "content": [
    {
      "call": "osm_resource",
      "arguments": {
        "name": "osm_map",
        "filename": "$__DIR__/map_nyc.osm",
        "cache_filename": "$__APPDATA__/$LEVEL_ID.cereal.binary",
        "heightmap": "$__DIR__/heightmap.pgm",
        "terrain_undefined_textures": ["textures/debug/pink.png"],
        "terrain_grass_textures": ["#Ground037_Sl"],
        "terrain_elevated_grass_textures": ["#Ground037_Sl"],
        "terrain_elevated_grass_base_textures": ["#Concrete020"],
        "terrain_stone_textures": [
          "#Pavement_ConcreteSidewalk3_Base",
          "#concrete1_2K_wh_Detail"],
        "terrain_asphalt_textures": ["#Road007_No_Lines_Detail_Base", "#Gravel010_Detail"],
        "bounding_terrain_type": "stone",
        "default_terrain_type": "stone",
        "terrain_materials": {
          "grass": "surface_base_grass",
          "wayside1_grass": "surface_base_grass",
          "wayside2_grass": "surface_base_grass",
          "flowers": "surface_base_grass",
          "trees": "surface_base_grass",
          "elevated_grass": "surface_base_grass",
          "elevated_grass_base": "surface_base_stone",
          "stone": "surface_base_stone",
          "asphalt": "surface_base_tarmac",
          "water_floor": "none",
          "water_floor_base": "none",
          "street_hole": "none",
          "building_hole": "none",
          "ocean_ground": "none",
          "undefined": "none"},
        "street_materials": "surface_base_tarmac",
        "path_materials": "surface_base_tarmac",
        "wall_materials": "surface_base_stone",
        "street_dirt_texture": "#Asphalt016_Dirt",
        "street_crossing_textures": ["#Road007_No_Lines_Detail_Base", "#Gravel010_Detail"],
        "street_textures": [
          {"lanes": 1, "textures": ["#Road007_No_Lines_Detail_Base", "#Gravel010_Detail"]},
          {"lanes": 2, "textures": ["#RoadOld_Yellow_Detail_Base", "#Gravel010_Detail"]},
          {"lanes": 4, "textures": ["#Road007_White_1x_Lane_Detail_Base", "#Gravel010_Detail"], "uvx": 4},
          {"lanes": 6, "textures": ["#Road007_White_1x_Lane_Detail_Base", "#Gravel010_Detail"], "uvx": 6}],
        "street_reflection_map": "ground",
        "path_reflection_map": "ground",
        "terrain_stone_reflection_map": "ground",
        "terrain_asphalt_reflection_map": "ground",
        "wall_textures": [
          {"lanes": 1, "textures": ["#PavingStones046"], "uvx":0.15}],
        "path_crossing_textures": ["#Road007_No_Lines_Detail_Base", "#Gravel010_Detail"],
        "path_texture": "#Road007_No_Lines",
        "curb_street_texture": "#Pavement_ConcreteSidewalk3",
        "curb_path_texture": "#Pavement_ConcreteSidewalk3",
        "curb2_street_texture": "#Pavement_ConcreteSidewalk3",
        "curb2_path_texture": "#Pavement_ConcreteSidewalk3",
        "air_curb_street_texture": "#Metal038",
        "air_curb_path_texture": "#Metal038",
        "air_support_texture": "#Concrete020",
        "socle_textures": [
          {"textures": ["Bricks058_Base", "concrete1_2K_wh_Detail"]}],
        "entrance_textures": [
          {
            "facade": ["wall_facade_bricks_red_Base", "concrete1_2K_wh_Detail"],
            "interior": {
              "facade_edge_size": [2, 0],
              "facade_inner_size": [2, 0.7],
              "interior_size": [7, 4, 0.5],
              "left": "room.left",
              "right": "room.right",
              "floor": "room.floor",
              "ceiling": "room.ceiling",
              "back": "TCom_Shops0106_S"
            }
          },
          {
            "facade": ["wall_facade_bricks_red_Base", "concrete1_2K_wh_Detail"],
            "interior": {
              "facade_edge_size": [2, 0],
              "facade_inner_size": [2, 0.7],
              "interior_size": [7, 4, 0.5],
              "left": "room.left",
              "right": "room.right",
              "floor": "room.floor",
              "ceiling": "room.ceiling",
              "back": "TCom_Shops0200_S"
            }
          }
        ],
        "facade_textures": [
          {"facade": ["Plaster003_Base", "concrete1_2K_wh_Detail"], "max_height": 5},
          {"facade": ["Plaster003_Gray_Base", "concrete1_2K_wh_Detail"], "max_height":5},
          {
            "selector": "brick",
            "facade": ["wall_facade_bricks_red_Base", "concrete1_2K_wh_Detail"],
            "min_height": 5,
            "max_height": 50,
            "interior": {
              "facade_edge_size": [0.5, 0.5],
              "facade_inner_size": [1.4, 1.4],
              "interior_size": [1.5, 1.5, 0.2],
              "left": "DE21F2_industryWindow00001_left",
              "right": "DE21F2_industryWindow00001_right",
              "floor": "DE21F2_industryWindow00001_bottom",
              "ceiling": "DE21F2_industryWindow00001_top",
              "back": "DE21F2_industryWindow00001_1k"
            }
          },
          {
            "facade": ["wall_facade_plaster_orange_Base", "concrete1_2K_wh_Detail"],
            "min_height": 5,
            "max_height": 50,
            "interior": {
              "facade_edge_size": [0.5, 0.5],
              "facade_inner_size": [1.4, 1.4],
              "interior_size": [1.5, 1.5, 0.2],
              "left": "DE21F2_industryWindow00001_left",
              "right": "DE21F2_industryWindow00001_right",
              "floor": "DE21F2_industryWindow00001_bottom",
              "ceiling": "DE21F2_industryWindow00001_top",
              "back": "DE21F2_industryWindow00001_1k"
            }
          },
          {
            "facade": ["wall_facade_plaster_gray_Base", "concrete1_2K_wh_Detail"],
            "min_height": 50,
            "interior": {
              "facade_edge_size": [0.5, 0.5],
              "facade_inner_size": [0.7, 0.7],
              "interior_size": [5, 3, 4],
              "left": "DallasW_negx",
              "right": "DallasW_posx",
              "floor": "DallasW_negy",
              "ceiling": "DallasW_posy",
              "back": "DallasW_posz"
            }
          },
          {
            "facade": ["wall_facade_plaster_gray_Base", "concrete1_2K_wh_Detail"],
            "min_height": 50,
            "interior": {
              "facade_edge_size": [0.5, 0.5],
              "facade_inner_size": [0.7, 0.7],
              "interior_size": [5, 3, 4],
              "left": "MarriottMadisonWest_negx",
              "right": "MarriottMadisonWest_posx",
              "floor": "MarriottMadisonWest_negy",
              "ceiling": "MarriottMadisonWest_posy",
              "back": "MarriottMadisonWest_posz"
            }
          },
          {
            "facade": ["wall_facade_plaster_gray_Base", "concrete1_2K_wh_Detail"],
            "min_height": 50,
            "interior": {
              "facade_edge_size": [0.5, 0.5],
              "facade_inner_size": [0.7, 0.7],
              "interior_size": [5, 3, 4],
              "left": "room.left",
              "right": "room.right",
              "floor": "room.floor",
              "ceiling": "room.ceiling",
              "back": "room.back"
            }
          },
          {
            "facade": ["MarekWindow00001_512_Base", "concrete1_2K_wh_Detail"],
            "min_height": 50
          }
        ],
        "ceiling_texture": "#Asphalt015",
        "barrier_styles": [
          {
            "name": "fence1",
            "texture": "#fence1",
            "uv": [1, 1],
            "blend_mode": "semi_continuous_02",
            "wrap_mode_t": "repeat",
            "reorient_uv0": false,
            "ambient": [0.7, 0.7, 0.7],
            "diffuse": [0.5, 0.5, 0.5],
            "specular": [0, 0, 0],
            "fresnel_min": 0,
            "fresnel_max": 0.5,
            "fresnel_exponent": 4,
            "fresnel_ambient": [1, 1, 1]
          }],
        "roof_texture": "textures/cc0textures/RoofingTiles002_2K_Color.jpg",
        "racing_line_texture": "#racing_line",
        "racing_line_track": "%LOADED_RACING_LINE_TRACK",
        "racing_line_playback": "$__APPDATA__/$LEVEL_ID.checkpoints.m",
        "trashcan_resource_names": [
          "dumpster(yangle:0)(p:0.1)(hitbox:box_02_1_02_hitbox)",
          "trashcan1(yangle:90)(p:0.1)(hitbox:box_02_1_02_hitbox)",
          "trashcan2(yangle:90)(hitbox:box_02_1_02_hitbox)",
          "mailbox(yangle:0)(p:0.2)(hitbox:box_02_1_02_hitbox)",
          "bench(yangle:0)(p:0.2)(hitbox:box_02_1_02_hitbox)"],
        "trashcan_distances": {
          "tangential_distance": 120,
          "normal_distance": 1
        },
        "tree_resource_names": [
          "vegetation2.0(hitbox:box_02_1_02_hitbox)",
          "vegetation2.1(hitbox:box_02_1_02_hitbox)",
          "vegetation2.2(hitbox:box_02_1_02_hitbox)",
          "vegetation2.3(hitbox:box_02_1_02_hitbox)",
          "vegetation2.4(hitbox:box_02_1_02_hitbox)",
          "vegetation2.5(hitbox:box_02_1_02_hitbox)"],
        "near_grass_resource_names": [
          "bflower2(p:0.1)(min_bdry:1)",
          "grass_tbdpec3r_Ground037_Sl_low(min_bdry:1)",
          "bflower(p:0.1)(min_bdry:1)"],
        "dirt_decals_resource_names": [
          "Leaf018_2",
          "Leaf018_2_Red",
          "Paper(p:0.3)"],
        "default_street_width": 8,
        "default_lane_width": 4,
        "scale": 1e-3,
        "uv_scale_terrain": 3e-1,
        "uv_period_terrain": 512,
        "uv_scale_street": 1e-1,
        "uv_scale_path": 1e-1,
        "uv_scale_wall": 1e-1,
        "uv_scale_facade": 2.5e-1,
        "uv_scale_ceiling": 1e-1,
        "uv_scale_barrier_wall": 5,
        "uv_scale_highway_wall": 3e-1,
        "with_roofs": false,
        "with_ceilings": true,
        "building_bottom": 0,
        "default_building_top": 10,
        "default_barrier_top": 3,
        "default_snap_building_height": true,
        "default_building_vertical_subdivision": "entrances",
        "remove_backfacing_triangles": true,
        "with_tree_nodes": true,
        "forest_outline_tree_distance": 10,
        "forest_outline_tree_inwards_distance": 1,
        "much_grass_distance": "inf",
        "much_near_grass_distance": 2,
        "raceway_beacon_distance": "inf",
        "with_terrain": true,
        "with_buildings": true,
        "only_raceways_and_walls": false,
        "highway_name_pattern": "",
        "excluded_highways": [
          "pedestrian",
          "path",
          "footway",
          "cycleway",
          "steps",
          "elevator"],
        "path_tags": [
          "track",
          "tertiary"],
        "smoothed_highways": [
          "living_street",
          "motorway",
          "motorway_link",
          "primary",
          "residential",
          "secondary",
          "service",
          "tertiary",
          "track",
          "trunk",
          "trunk_link",
          "unclassified"],
        "max_smooth_highway_length": 20,
        "steiner_point_distances_road": [0, 2, 100],
        "steiner_point_distances_steiner": ["inf", 10, 100],
        "curb_alpha": 0.8,
        "curb2_alpha": 0.8,
        "curb_uv_x": 0.1,
        "curb2_uv_x": 0.1,
        "raise_streets_amount": 0,
        "extrude_curb_amount": 0,
        "extrude_street_amount": -0.1,
        "extrude_wall_amount": 1.5,
        "extrude_air_curb_amount": 0.5,
        "extrude_air_support_amount": -0.5,
        "extrude_grass_amount": -0.1,
        "extrude_elevated_grass_amount": 0.5,
        "street_light_resource_names": ["street_light_blob"],
        "max_wall_width": 10,
        "with_height_bindings": true,
        "street_node_smoothness": 1,
        "street_edge_smoothness": 0,
        "terrain_edge_smoothness": 0.1,
        "driving_direction": "right",
        "blend_street": false,
        "layer_heights_layer": [-1, 0, 5],
        "layer_heights_height": [40, 45, 70],
        "tunnel_pipe_texture": "#Concrete020",
        "tunnel_pipe_resource_name": "pipe_box",
        "tunnel_bdry_resource_name": "pipe_box_boundary",
        "default_tunnel_pipe_width": 1,
        "default_tunnel_pipe_height": 6,
        "water_texture": "#ocean",
        "water_height": 40,
        "street_surface_central_resource_name": "road_cylinder2_central",
        "street_surface_endpoint0_resource_name": "road_cylinder2_endpoint_0",
        "street_surface_endpoint1_resource_name": "road_cylinder2_endpoint_1",
        "game_level": "%LOADED_GAME_LEVEL",
        "emissive_factor": "%VANILLA_RALLY_EMISSIVE_FACTOR",
        "ambient_factor": "%VANILLA_RALLY_AMBIENT_FACTOR",
        "diffuse_factor": "%VANILLA_RALLY_DIFFUSE_FACTOR",
        "specular_factor": "%VANILLA_RALLY_SPECULAR_FACTOR"
      }
    },
    {
      "comment": {
        "call": "smoothen_edges",
        "arguments": {
          "resource": "osm_map",
          "target": "physics",
          "smoothness": 0.00001,
          "niterations": 5,
          "decay": 0.97
        }
      }
    }
  ]  
}
