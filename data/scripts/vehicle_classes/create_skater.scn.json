[
  {
    "declare_macro": "create_skater",
    "content": [
      {
        "call": "root_node_instance",
        "arguments": {
          "dynamics": "moving",
          "name": "skater_node$suffix",
          "scale": 1,
          "position": "%skater_node_position",
          "rotation": [0, "%skater_node_angle_y", 0]
        }
      },
      {
        "required": ["%if_skater_style"],
        "call": "add_color_style",
        "arguments": {
          "node": "skater_node$suffix",
          "ambient": "%color",
          "diffuse": "%color"
        }
      },
      {
        "required": ["%if_skater_style"],
        "call": "set_animation_state",
        "arguments": {
          "node": "skater_node$suffix",
          "animation_loop_name": "skate.right",
          "animation_loop_begin": 0,
          "animation_loop_end": "full",
          "animation_loop_time": 0
        }
      },
      {
        "playback": "create_$skater_name"
      },
      {
        "required": ["%if_spawner"],
        "call": "spawner_set_nodes",
        "arguments": {
          "asset_id": "%skater_name",
          "suffix": "%suffix",
          "spawner": "%spawner_name"
        }
      },
      {
        "required": ["%if_spawner"],
        "call": "set_respawn_cooldown_time",
        "arguments": {
          "spawner": "%spawner_name",
          "time": "%respawn_cooldown_time"
        }
      },
      {
        "comment": "IF_SHADOW macro_playback add_attached_light-skater_name lsuffix:_skater$suffix CSUFFIX:suffix"
      },
      {
        "required": ["%if_spawner"],
        "call": "set_externals_creator",
        "arguments": {
          "externals": {
            "playback": "create_player_skater_externals"
          },
          "internals": {
            "playback": "create_player_skater_internals"
          },
          "spawner": "%spawner_name"
        }
      },
      {
        "comment": {
          "call": "visual_node_status_3rd",
          "arguments": {
            "node": "skater_node$suffix",
            "format": 8,
            "ttf_file": "fonts/RobotoMono-Bold.ttf",
            "offset": [0, 0.3],
            "font_height": 16,
            "line_distance": 16
          }
        }
      }
    ]
  },
  {
    "declare_macro": "create_player_skater_externals",
    "content": [
      {
        "playback": "create_player_skater_externals_$skater_name",
        "arguments": {
          "name": "%skater_name"
        }
      }
    ]
  },
  {
    "declare_macro": "create_player_skater_internals",
    "content": [
      {
        "playback": "create_player_skater_internals_$skater_name",
        "arguments": {
          "name": "%skater_name"
        }
      }
    ]
  }
]
