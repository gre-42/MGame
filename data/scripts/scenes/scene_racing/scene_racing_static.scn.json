{
  "declare_macro": "scene_racing_static",
  "content": [
    {
      "required": ["%osm_map_resource != %null"],
      "playback": "%osm_map_resource"
    },
    {
      "required": ["%if_has_overlay"],
      "playback": "%OSM_MAP_OVERLAY_RESOURCE"
    },
    {
      "call": "create_scene",
      "arguments": {
        "name": "primary_scene",
        "world": "common",
        "focus_mask": "scene|countdown_any|game_over_countdown_any",
        "submenus": [],
        "fly": "%primary_scene_fly",
        "rotate": "%primary_scene_rotate",
        "depth_fog": "%primary_scene_depth_fog",
        "low_pass": "%primary_scene_low_pass",
        "high_pass": "%primary_scene_high_pass",
        "bloom_iterations": "%primary_scene_bloom_iterations",
        "bloom_thresholds": "%primary_scene_bloom_thresholds",
        "with_skybox": "%primary_scene_with_skybox",
        "with_flying_logic": "%primary_scene_with_flying_logic",
        "clear_mode": "color_and_depth",
        "max_tracks": 5,
        "save_playback": "%primary_scene_save_playback"
      }
    },
    {
      "call": "instantiate_game_logic",
      "context": "primary_scene",
      "arguments": {
        "setup_new_round": {
          "playback": "_setup_new_round",
          "context": "primary_scene"
        }
      }
    },
    {
      "call": "create_scene",
      "arguments": {
        "name": "weapon_closeup",
        "world": "common",
        "focus_mask": "scene|countdown_any|game_over_countdown_any",
        "submenus": [],
        "fly": false,
        "rotate": false,
        "depth_fog": false,
        "low_pass": false,
        "high_pass": false,
        "bloom_iterations": [0, 0],
        "bloom_thresholds": [1, 1, 1],
        "with_skybox": false,
        "with_flying_logic": false,
        "clear_mode": "depth"
      }
    },
    {
      "playback": "_setup_weapon_closeup",
      "context": "weapon_closeup"
    },
    {
      "playback": "_scene_racing_instantiate_static_objects",
      "context": "primary_scene",
      "arguments": {
        "IF_INSTANTIATE_OSM_MAP": "%osm_map_resource != %null",
        "if_create_pc_player": "%if_create_pc_player",
        "if_pc_player_playback": "%if_pc_player_playback",
        "pc_player_playback": "%pc_player_playback",
        "pc_player_playback_speedup": "%pc_player_playback_speedup",
        "score_board": "%score_board",
        "if_gen_grind_lines": "%if_gen_grind_lines",
        "if_gen_instances": "%if_gen_instances",
        "if_extract_alignment_planes": "%if_extract_alignment_planes",
        "barrier_depth": "%barrier_depth",
        "if_with_geographic_mapping": "%if_with_geographic_mapping",
        "stadium_camera_position": "%stadium_camera_position",
        "if_has_overlay": "%if_has_overlay",
        "dirtmap_left": "%dirtmap_left",
        "dirtmap_right": "%dirtmap_right",
        "dirtmap_bottom": "%dirtmap_bottom",
        "dirtmap_top": "%dirtmap_top",
        "if_dirtmap": "%if_dirtmap",
        "dirtmap_texture": "%dirtmap_texture",
        "dirtmap_offset": "%dirtmap_offset",
        "dirtmap_discreteness": "%dirtmap_discreteness",
        "dirt_scale": "%dirt_scale",
        "dirtmap_wrap_mode": "%dirtmap_wrap_mode",
        "soft_light_texture": "%soft_light_texture"
      }
    },
    {
      "execute": [
        {
          "playback": "create_tripod_key_bindings",
          "context": "primary_scene"
        },
        {
          "call": "globals",
          "arguments": { "if_tripod_mode_old": false }
        }
      ]
    }
  ]
}
