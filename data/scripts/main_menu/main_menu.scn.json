[
  {
    "declare_macro": "_reload_transient_objects_in_physics_thread",
    "content":  [
      {
        "comment": [
          "Disable GUI modifications in the render thread so the physics",
          "thread can read the global parameters without data races"]
      },
      {
        "call": "set_focuses",
        "arguments": {"focuses": []}
      },
      {
        "call": "execute_in_physics_thread",
        "arguments": {
          "command": { "playback": "scene_racing_setup_new_round" }
        }
      }
    ]
  },
  {
    "declare_macro": "__change_showroom_vehicle_in_physics_thread",
    "content": {
      "call": "execute_in_physics_thread",
      "arguments": {
        "command": {
          "playback": "change_showroom_vehicle"
        }
      }
    }
  },
  {
    "declare_macro": "_change_showroom_vehicle_in_physics_thread",
    "content": {
      "playback": "__change_showroom_vehicle_in_physics_thread",
      "let": {
        "VEHICLE_NAME": "%%vehicles/$selected_vehicle_id/suffix",
        "VEHICLE_CLASS": "%%vehicles/$selected_vehicle_id/class",
        "VEHICLE_COLOR": "%SELECTED_PLAYER_VEHICLE_COLOR"
      }
    }
  },
  {
    "declare_macro": "_setup_menu_primary_scene_game_mode_selector",
    "content": [
      {
        "call": "ui_background",
        "arguments": {
          "z_order": 1,
          "texture": "#ui_background_cars",
          "left": "min",
          "right": "end",
          "bottom": "min",
          "top": "end",
          "delay_load_policy": "no_delay",
          "focus_mask": "menu_any|loading"
        }
      },
      {
        "call": "parameter_setter",
        "arguments": {
          "id": "game_mode_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Game_mode/$selected_language",
          "icon": "game_mode_icon",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "database_filter": {
            "database": "levels",
            "variable": "game_modes"
          },
          "hide_if_trivial": true,
          "parameters": [
            {"id": "rally", "title": "Rally", "on_before_select": { "call": "globals", "arguments": {"game_mode": "rally"}}},
            {"id": "skating", "title": "Skating", "on_before_select": { "call": "globals", "arguments": {"game_mode": "skating"}}},
            {"id": "team_deathmatch", "title": "Team deathmatch", "on_before_select": { "call": "globals", "arguments": {"game_mode": "team_deathmatch"}}}
          ]
        }
      }
    ]
  },
  {
    "declare_macro": "_update_scene_icon",
    "content": {
      "call": "update_gallery",
      "arguments": {
        "instance": "level_icon",
        "resource": "%level_icon_file",
        "color_mode": "rgb"
      }
    }
  },
  {
    "declare_macro": "_setup_menu_primary_scene_rest",
    "content": [
      {
        "call": "ui_exhibit",
        "arguments": {
          "z_order": 1,
          "id_in_gallery": "level_icon",
          "left": "scene_icon_left",
          "right": "scene_icon_right",
          "bottom": "scene_icon_bottom",
          "top": "scene_icon_top",
          "delay_load_policy": "delay",
          "focus_mask": "new_game_menu",
          "submenus": ["scene_selector"]
        }
      },
      {
        "call": "scene_selector",
        "arguments": {
          "id": "scene_selector",
          "title": "%%translations/main/Scene/$selected_language",
          "icon": "scene_selector_icon",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "on_change": {
            "playback": "_update_scene_icon"
          },
          "assets": "levels"
        }
      },
      {
        "playback": "parameter_setters",
        "arguments": {
          "if_devel": "%if_devel"
        }
      },
      {
        "comment": [
          "# fill_pixel_region_with_texture",
          "source_scene=showroom",
          "texture_name=scene",
          "update=always",
          "position=20 80",
          "size=500 300",
          "focus_mask=menu",
          "submenus=car_selector car_color_selector;"
        ]
      },
      {
        "comment": {
          "exclude": ["%if_android"],
          "call": "controls",
          "arguments": {
            "id": "controls",
            "title": "Controls",
            "icon": "controls_icon",
            "left": "submenu_left",
            "right": "controls_right",
            "bottom": "controls_bottom",
            "top": "submenu_top",
            "delay_load_policy": "no_delay",
            "gamepad_texture": "textures/ui/menu/gamepad.png"
          }
        }
      },
      {
        "playback": "tab_menus",
        "arguments": {
          "if_devel": "%if_devel"
        }
      },
      {
        "#comment": "Currently not used, countdown is used instead",
        "call": "focused_text",
        "arguments": {
          "position": ["nan", "nan"],
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "huge",
          "line_distance": "huge",
          "focus_mask": "game_over",
          "text": "Game over"
        }
      },
      {
        "required": ["%if_android"],
        "playback": "create_tap_buttons"
      }
    ]
  },
  {
    "declare_macro": "create_main_menu",
    "content": [
      {
        "playback": "_setup_menu_primary_scene_game_mode_selector",
        "context": "primary_scene"
      },
      {
        "playback": "create_showroom_scene"
      },
      {
        "playback": "_setup_menu_showroom",
        "context": "showroom"
      },
      {
        "playback": "_setup_menu_primary_scene_rest",
        "context": "primary_scene"
      }
    ]
  },
  {
    "declare_macro": "_setup_menu_showroom",
    "#content": {
      "call": "scene_to_texture",
      "arguments": {
        "texture_name": "scene",
        "size": [500, 300],
        "focus_mask": "new_game_menu",
        "submenus": ["car_selector", "car_color_selector"]
      }
    },
    "content": {
      "call": "scene_to_pixel_region",
      "arguments": {
        "target_scene": "primary_scene",
        "z_order": 2,
        "left": "showroom_left",
        "right": "showroom_right",
        "bottom": "showroom_bottom",
        "top": "showroom_top",
        "focus_mask": "new_game_menu",
        "submenus": ["car_selector", "car_color_selector"]
      }
    }
  },
  {
    "declare_macro": "tab_menus",
    "content": [
      {
        "call": "tab_menu",
        "arguments": {
          "id": "main_submenus",
          "focus_mask": "main_menu",
          "selection_marker": "selection_marker",
          "style": "icon",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "reference_widget": {
            "left": "tabmenu_reference_left",
            "right": "tabmenu_reference_right",
            "bottom": "tabmenu_reference_bottom",
            "top": "tabmenu_reference_top"
          },
          "widget": {
            "left": "tabmenu_left",
            "right": "tabmenu_right",
            "bottom": "tabmenu_bottom",
            "top": "tabmenu_top"
          },
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "z_order": 2
        }
      },
      {
        "call": "tab_menu",
        "arguments": {
          "id": "settings_submenus",
          "focus_mask": "settings_menu",
          "selection_marker": "selection_marker",
          "style": "icon",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "reference_widget": {
            "left": "tabmenu_reference_left",
            "right": "tabmenu_reference_right",
            "bottom": "tabmenu_reference_bottom",
            "top": "tabmenu_reference_top"
          },
          "icon_widget": {
            "left": "tabmenu_icon_left",
            "right": "tabmenu_icon_right",
            "bottom": "tabmenu_icon_bottom",
            "top": "tabmenu_icon_top"
          },
          "title_widget": {
            "left": "tabmenu_title_left",
            "right": "tabmenu_title_right",
            "bottom": "tabmenu_title_bottom",
            "top": "tabmenu_title_top"
          },
          "widget": {
            "left": "tabmenu_left",
            "right": "tabmenu_right",
            "bottom": "tabmenu_bottom",
            "top": "tabmenu_top"
          },
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "z_order": 2
        }
      },
      {
        "call": "tab_menu",
        "arguments": {
          "id": "controls_submenus",
          "focus_mask": "controls_menu",
          "selection_marker": "selection_marker",
          "style": "text",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "reference_widget": {
            "left": "tabmenu_reference_left",
            "right": "tabmenu_reference_right",
            "bottom": "tabmenu_reference_bottom",
            "top": "tabmenu_reference_top"
          },
          "widget": {
            "left": "tabmenu_left",
            "right": "tabmenu_right",
            "bottom": "tabmenu_bottom",
            "top": "tabmenu_top"
          },
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "z_order": 2
        }
      },
      {
        "call": "tab_menu",
        "arguments": {
          "id": "new_game_submenus",
          "focus_mask": "new_game_menu",
          "selection_marker": "selection_marker",
          "style": "icon",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "reference_widget": {
            "left": "tabmenu_reference_left",
            "right": "tabmenu_reference_right",
            "bottom": "tabmenu_reference_bottom",
            "top": "tabmenu_reference_top"
          },
          "icon_widget": {
            "left": "tabmenu_icon_left",
            "right": "tabmenu_icon_right",
            "bottom": "tabmenu_icon_bottom",
            "top": "tabmenu_icon_top"
          },
          "title_widget": {
            "left": "tabmenu_title_left",
            "right": "tabmenu_title_right",
            "bottom": "tabmenu_title_bottom",
            "top": "tabmenu_title_top"
          },
          "widget": {
            "left": "tabmenu_left",
            "right": "tabmenu_right",
            "bottom": "tabmenu_bottom",
            "top": "tabmenu_top"
          },
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "on_execute": [
            {
              "required": ["%selected_level_id != %loaded_level_id"],
              "execute": {
                "call": "reload_scene",
                "arguments": {
                  "change_scene": true
                }
              }
            },
            {
              "required": ["%selected_level_id == %loaded_level_id"],
              "execute": {
                "playback": "_reload_transient_objects_in_physics_thread"
              }
            }
          ],
          "z_order": 2
        }
      }
    ]
  },
  {
    "declare_macro": "parameter_setters",
    "content": [
      {
        "call": "add_charset",
        "arguments": {
          "name": "language",
          "chars": "' 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-+*/<>,;:()[]{}$€£%'\"ç'"
        }
      },
      {
        "call": "parameter_setter",
        "arguments": {
          "id": "language",
          "charset": "language",
          "focus_mask": "settings_menu",
          "title": "%%translations/main/Language/$selected_language",
          "icon": "language_icon",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "persistent": "language",
          "assets": "languages",
          "# on_change": [
            {
              "required": ["%selected_language != %loaded_language"],
              "execute": {
                "call": "set_requires_reload",
                "arguments": {
                  "id": "language",
                  "reason": "'%%translations/main/Language_changed/$selected_language'",
                  "indicator": "reload_required"
                }
              }
            },
            {
              "required": ["%selected_language == %loaded_language"],
              "execute": {
                "call": "clear_requires_reload",
                "arguments": {
                  "id": "language",
                  "indicator": "reload_required"
                }
              }
            }
          ],
          "on_execute": {
            "call": "set_focuses",
            "arguments": {
              "focuses": ["main_menu"]
            }
          }
        }
      },
      {
        "call": "reload_required",
        "arguments": {
          "title": "$$translations/main/Reload_required/$selected_language:",
          "focus_mask": "main_menu",
          "left": "showroom_left",
          "right": "showroom_right",
          "bottom": "showroom_bottom",
          "top": "showroom_top",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_highlighted_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "z_order": 2
        }
      },
      {
        "call": "parameter_setter",
        "arguments": {
          "id": "main_menu",
          "focus_mask": "main_menu",
          "submenus": [],
          "title": "Main menu",
          "icon": "main_icon",
          "required": [],
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "parameters": [
            {
              "id": "new_game",
              "title": "%%translations/main/New_game/$selected_language",
              "on_execute": { "call": "append_focuses", "arguments": {"content": ["new_game_menu"]}}
            },
            {
              "required": {
                "fixed": [],
                "dynamic": [],
                "focus_mask": "query_contains|scene"
              },
              "id": "continue_game",
              "title": "%%translations/main/Continue_game/$selected_language",
              "on_execute": { "call": "pop_focus", "arguments": {"expected": "main_menu"}}
            },
            {
              "id": "settings",
              "title": "$$translations/main/Settings/$selected_language (Ѭҿ)",
              "on_execute": { "call": "append_focuses", "arguments": {"content": ["settings_menu"]}}
            },
            {
              "required": {
                "fixed": [],
                "dynamic": ["%reload_required"]
              },
              "id": "reload",
              "title": "%%translations/main/Reload/$selected_language",
              "on_execute": { "call": "reload_scene", "arguments": {"change_scene": false}}
            },
            {
              "id": "exit",
              "title": "%%translations/main/Exit/$selected_language",
              "on_execute": { "call": "exit" }
            }
          ]
        }
      },
      {
        "#comment": "Some initial color so the code does not crash until the real color is defined",
        "call": "globals",
        "arguments": { "SELECTED_PLAYER_VEHICLE_COLOR": [1, 1, 0] }
      },
      {
        "required": ["%if_devel"],
        "call": "parameter_setter",
        "arguments": {
          "id": "time_of_day_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Time_of_day/$selected_language",
          "icon": "time_of_day_icon",
          "required": [],
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "parameters": [
            {"id": "day", "title": "%%translations/main/Day/$selected_language", "on_before_select": { "call": "globals", "arguments": {"skybox": "skybox", "time_of_day": "day"}}},
            {"id": "night", "title": "%%translations/main/Night/$selected_language", "on_before_select": { "call": "globals", "arguments": {"skybox": "skybox_night", "time_of_day": "night"}}},
            {"id": "synthwave", "title": "%%translations/main/Synthwave/$selected_language", "on_before_select": { "call": "globals", "arguments": {"skybox": "skybox_night", "time_of_day": "synthwave"}}}
          ]
        }
      },
      {
        "exclude": ["%if_devel"],
        "call": "parameter_setter",
        "arguments": {
          "id": "time_of_day_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Time_of_day/$selected_language",
          "icon": "time_of_day_icon",
          "required": [],
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "parameters": [
            {"id": "day", "title": "%%translations/main/Day/$selected_language", "on_before_select": { "call": "globals", "arguments": {"skybox": "skybox", "time_of_day": "day"}}},
            {"id": "night", "title": "%%translations/main/Night/$selected_language", "on_before_select": { "call": "globals", "arguments": {"skybox": "skybox_night", "time_of_day": "night"}}}
          ]
        }
      },
      {
        "call": "parameter_setter",
        "arguments": {
          "id": "restrictions_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Restrictions/$selected_language",
          "icon": "restrictions_icon",
          "required": ["%game_mode == 'rally'"],
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "parameters": [
            {"id": "car", "title": "%%translations/main/Car/$selected_language", "on_before_select": { "call": "globals", "arguments": {"RACE_RESTRICTIONS": "car"}}},
            {"id": "car_with_trailer", "title": "%%translations/main/Car_with_trailer/$selected_language", "on_before_select": { "call": "globals", "arguments": {"RACE_RESTRICTIONS": "car_with_trailer"}}}
          ]
        }
      },
      {
        "call": "parameter_setter",
        "arguments": {
          "id": "car_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Vehicle/$selected_language",
          "icon": "car_icon",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "on_change": {
            "playback": "_change_showroom_vehicle_in_physics_thread",
            "context": "showroom"
          },
          "assets": "vehicles"
        }
      },
      {
        "call": "parameter_setter",
        "arguments": {
          "id": "car_color_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Color/$selected_language",
          "icon": "color_icon",
          "required": ["%game_mode == 'rally'"],
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "on_change": {
            "playback": "_change_showroom_vehicle_in_physics_thread",
            "context": "showroom"
          },
          "parameters": [
            {"id": "white", "title": "%%translations/main/White/$selected_language", "on_before_select": { "call": "globals", "arguments": {"SELECTED_PLAYER_VEHICLE_COLOR": [1,    1,    1]}}},
            {"id": "gray", "title": "%%translations/main/Gray/$selected_language",  "on_before_select": { "call": "globals", "arguments": {"SELECTED_PLAYER_VEHICLE_COLOR": [0.5,  0.5,  0.5]}}},
            {"id": "red", "title": "%%translations/main/Red/$selected_language",   "on_before_select": { "call": "globals", "arguments": {"SELECTED_PLAYER_VEHICLE_COLOR": [0.7,  0.05, 0.09]}}},
            {"id": "green", "title": "%%translations/main/Green/$selected_language", "on_before_select": { "call": "globals", "arguments": {"SELECTED_PLAYER_VEHICLE_COLOR": [0.52, 0.63, 0.54]}}},
            {"id": "blue", "title": "%%translations/main/Blue/$selected_language",  "on_before_select": { "call": "globals", "arguments": {"SELECTED_PLAYER_VEHICLE_COLOR": [0.51, 0.56, 0.62]}}},
            {"id": "black", "title": "%%translations/main/Black/$selected_language", "on_before_select": { "call": "globals", "arguments": {"SELECTED_PLAYER_VEHICLE_COLOR": [0.06, 0.07, 0.06]}}}
          ]
        }
      },
      {
        "required": ["%if_devel"],
        "call": "parameter_setter",
        "arguments": {
          "id": "session_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Session/$selected_language",
          "icon": "session_icon",
          "required": ["%game_mode == 'rally'"],
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "parameters": [
            {"id": "'1'", "title": "Session1", "on_before_select": { "call": "globals", "arguments": {"RACE_SESSION": "session1"}}},
            {"id": "'2'", "title": "Session2", "on_before_select": { "call": "globals", "arguments": {"RACE_SESSION": "session2"}}},
            {"id": "'3'", "title": "Session3", "on_before_select": { "call": "globals", "arguments": {"RACE_SESSION": "session3"}}},
            {"id": "'4'", "title": "Session4", "on_before_select": { "call": "globals", "arguments": {"RACE_SESSION": "session4"}}},
            {"id": "'5'", "title": "Session5", "on_before_select": { "call": "globals", "arguments": {"RACE_SESSION": "session5"}}}
          ]
        }
      },
      {
        "call": "globals",
        "exclude": ["%if_devel"],
        "arguments": { "RACE_SESSION": "session1" }
      },
      {
        "call": "parameter_setter",
        "arguments": {
          "id": "laps_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Laps/$selected_language",
          "icon": "laps_icon",
          "required": ["%game_mode == 'rally'", "%%levels/$selected_level_id/if_raceway_circular"],
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "parameters": [
            {"id": "'1'", "title": "'1 Lap'",   "on_before_select": { "call": "globals", "arguments": {"RACE_LAPS": 1}}},
            {"id": "'2'", "title": "'2 Laps'",  "on_before_select": { "call": "globals", "arguments": {"RACE_LAPS": 2}}},
            {"id": "'4'", "title": "'4 Laps'",  "on_before_select": { "call": "globals", "arguments": {"RACE_LAPS": 4}}},
            {"id": "'8'", "title": "'8 Laps'",  "on_before_select": { "call": "globals", "arguments": {"RACE_LAPS": 8}}},
            {"id": "'16'", "title": "'16 Laps'", "on_before_select": { "call": "globals", "arguments": {"RACE_LAPS": 16}}}
          ]
        }
      },
      {
        "required": ["%if_devel"],
        "call": "parameter_setter",
        "arguments": {
          "id": "playback_ranks_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Playback_ranks/$selected_language",
          "icon": "replay_icon",
          "required": ["%game_mode == 'rally'"],
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "parameters": [
            {"id": "none", "title": "No replay", "on_before_select": { "call": "globals", "arguments": {"IF_PLAYBACK_WINNER_0": false, "IF_PLAYBACK_WINNER_1": false, "IF_PLAYBACK_WINNER_2": false}}},
            {"id": "rank1", "title": "Rank 1", "on_before_select": { "call": "globals", "arguments": {"IF_PLAYBACK_WINNER_0": true, "IF_PLAYBACK_WINNER_1": false, "IF_PLAYBACK_WINNER_2": false}}},
            {"id": "ranks1-2", "title": "Ranks 1-2", "on_before_select": { "call": "globals", "arguments": {"IF_PLAYBACK_WINNER_0": true, "IF_PLAYBACK_WINNER_1": true, "IF_PLAYBACK_WINNER_2": false}}},
            {"id": "ranks1-3", "title": "Ranks 1-3", "on_before_select": { "call": "globals", "arguments": {"IF_PLAYBACK_WINNER_0": true, "IF_PLAYBACK_WINNER_1": true, "IF_PLAYBACK_WINNER_2": true}}}
          ]
        }
      },
      {
        "call": "globals",
        "exclude": ["%if_devel"],
        "arguments": { "IF_PLAYBACK_WINNER_0": false, "IF_PLAYBACK_WINNER_1": false, "IF_PLAYBACK_WINNER_2": false }
      },
      {
        "required": ["%if_devel"],
        "exclude": ["%if_android"],
        "call": "parameter_setter",
        "arguments": {
          "id": "render_fps_selector",
          "focus_mask": "settings_menu",
          "title": "%%translations/main/Render_FPS/$selected_language",
          "icon": "render_fps_icon",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 1,
          "on_change": {
            "call": "set_render_fps",
            "arguments": {
              "fps": "%RENDER_FPS"
            }
          },
          "parameters": [
            {"id": "'30'", "title": "'30'", "on_before_select": { "call": "globals", "arguments": {"RENDER_FPS": 30}}},
            {"id": "'60'", "title": "'60'", "on_before_select": { "call": "globals", "arguments": {"RENDER_FPS": 60}}}
          ]
        }
      },
      {
        "required": ["%if_devel"],
        "call": "parameter_setter",
        "arguments": {
          "id": "playback_speed_selector",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Playback_speed/$selected_language",
          "icon": "missing_icon",
          "required": ["%game_mode == 'rally'"],
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 2,
          "parameters": [
            {"id": "'80'", "title": "'80%'", "on_before_select": { "call": "globals", "arguments": {"PLAYBACK_SPEED": 0.8}}},
            {"id": "'90'", "title": "'90%'", "on_before_select": { "call": "globals", "arguments": {"PLAYBACK_SPEED": 0.9}}},
            {"id": "'100'", "title": "'100%'", "on_before_select": { "call": "globals", "arguments": {"PLAYBACK_SPEED": 1}}},
            {"id": "'110'", "title": "'110%'", "on_before_select": { "call": "globals", "arguments": {"PLAYBACK_SPEED": 1.1}}},
            {"id": "'120'", "title": "'120%'", "on_before_select": { "call": "globals", "arguments": {"PLAYBACK_SPEED": 1.2}}}
          ]
        }
      },
      {
        "call": "globals",
        "exclude": ["%if_devel"],
        "arguments": { "PLAYBACK_SPEED": 1 }
      },
      {
        "required": ["%if_devel"],
        "call": "parameter_setter",
        "arguments": {
          "id": "tripod_mode",
          "focus_mask": "new_game_menu",
          "title": "%%translations/main/Spectator_mode/$selected_language",
          "icon": "tripod_icon",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 1,
          "parameters": [
            {"id": "enabled", "title": "%%translations/main/Enabled/$selected_language", "on_before_select": { "call": "globals", "arguments": {"if_tripod_mode": true}}},
            {"id": "disabled", "title": "%%translations/main/Disabled/$selected_language", "on_before_select": { "call": "globals", "arguments": {"if_tripod_mode": false}}}
          ]
        }
      },
      {
        "call": "globals",
        "exclude": ["%if_devel"],
        "arguments": { "if_tripod_mode": false }
      },
      {
        "call": "parameter_setter",
        "arguments": {
          "id": "input_type",
          "focus_mask": "settings_menu",
          "title": "%%translations/main/Input_type/$selected_language",
          "icon": "controls_icon",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "submenu_right",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0,
          "on_execute": {
            "call": "append_focuses",
            "arguments": {
              "content": ["controls_menu"]
            }
          },
          "parameters": [
            {"id": "keyboard", "title": "Keyboard", "on_before_select": { "call": "globals", "arguments": {"input_type": "keyboard"}}},
            {"id": "mouse", "title": "Mouse", "on_before_select": { "call": "globals", "arguments": {"input_type": "mouse"}}},
            {"id": "tap_button", "title": "Tap button", "on_before_select": { "call": "globals", "arguments": {"input_type": "tap_button"}}},
            {"id": "joystick", "title": "Joystick/gamepad", "on_before_select": { "call": "globals", "arguments": {"input_type": "joystick"}}},
            {"id": "all", "title": "All", "on_before_select": { "call": "globals", "arguments": {"input_type": "all"}}}
          ]
        }
      },
      {
        "required": ["%if_devel"],
        "call": "key_bindings",
        "arguments": {
          "id": "key_bindings_debug",
          "focus_mask": "controls_menu",
          "section": "debug",
          "title": "%%translations/main/Debug/$selected_language",
          "charset": "%selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "end",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0
        }
      },
      {
        "call": "key_bindings",
        "arguments": {
          "id": "key_bindings_avatar",
          "focus_mask": "controls_menu",
          "section": "avatar",
          "title": "%%translations/main/Avatar/$selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "end",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0
        }
      },
      {
        "call": "key_bindings",
        "arguments": {
          "id": "key_bindings_car_heli",
          "focus_mask": "controls_menu",
          "section": "car_or_heli",
          "title": "%%translations/main/Car_or_heli/$selected_language",
          "ttf_file": "fonts/RobotoMono-Bold.ttf",
          "left": "submenu_left",
          "right": "end",
          "bottom": "submenu_bottom",
          "top": "submenu_top",
          "font_color": "%ui_font_color",
          "font_height": "normal",
          "line_distance": "normal",
          "deflt": 0
        }
      }
    ]
  }
]
